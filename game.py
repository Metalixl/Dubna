import time
import random


def print_slow(text, delay=0.03):
    """–ü–µ—á–∞—Ç–∞–µ—Ç —Ç–µ–∫—Å—Ç —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º ¬´–ø–µ—á–∞—Ç–Ω–æ–π –º–∞—à–∏–Ω–∫–∏¬ª."""
    for char in text:
        print(char, end='', flush=True)
        time.sleep(delay)
    print()


def roll_dice():
    """–ë—Ä–æ—Å–æ–∫ –∫—É–±–∏–∫–∞ (1‚Äì6) –¥–ª—è —Å–ª—É—á–∞–π–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π."""
    return random.randint(1, 6)


def battle(player, enemy_name, enemy_hp, enemy_attack, description=""):
    """–ë–æ–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å —É—á—ë—Ç–æ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –∏–≥—Ä–æ–∫–∞."""
    if description:
        print_slow(description)
    print(f"\nüíÄ –ë–∏—Ç–≤–∞ —Å {enemy_name}!")
    print(f"–£ –≤–∞—Å: {player['hp']} HP, –∞—Ç–∞–∫–∞ {player['strength']}")
    print(f"–£ –≤—Ä–∞–≥–∞: {enemy_hp} HP, –∞—Ç–∞–∫–∞ {enemy_attack}")

    while player['hp'] > 0 and enemy_hp > 0:
        print("\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:")
        print("1. –ê—Ç–∞–∫–æ–≤–∞—Ç—å")
        print("2. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —É–∫–ª–æ–Ω–∏—Ç—å—Å—è (—à–∞–Ω—Å = –•–∏—Ç—Ä–æ—Å—Ç—å √ó 10%)")
        print(f"3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–µ–ª—å–µ (–≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 20 HP, –¥–æ—Å—Ç—É–ø–Ω–æ: {player['potions']})")

        choice = input("> ")

        if choice == "1":
            damage = player['strength'] + roll_dice()
            enemy_hp -= damage
            print(f"–í—ã –Ω–∞–Ω–µ—Å–ª–∏ {damage} —É—Ä–æ–Ω–∞!")
        elif choice == "2":
            evade_chance = player['cunning'] * 0.1
            if random.random() < evade_chance:
                print("–í—ã –ª–æ–≤–∫–æ —É–∫–ª–æ–Ω–∏–ª–∏—Å—å –æ—Ç –∞—Ç–∞–∫–∏!")
                continue
            else:
                print("–£–∫–ª–æ–Ω–µ–Ω–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å!")
        elif choice == "3" and player['potions'] > 0:
            player['hp'] += 20
            player['potions'] -= 1
            print("–í—ã –≤—ã–ø–∏–ª–∏ –∑–µ–ª—å–µ. –ó–¥–æ—Ä–æ–≤—å–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ 20 HP.")
        else:
            print("–ù–µ–≤–µ—Ä–Ω—ã–π –≤–≤–æ–¥. –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç–µ —Ö–æ–¥.")

        if enemy_hp <= 0:
            print(f"–í—ã –ø–æ–±–µ–¥–∏–ª–∏ {enemy_name}!")
            return True

        # –ê—Ç–∞–∫–∞ –≤—Ä–∞–≥–∞
        player['hp'] -= enemy_attack
        print(f"{enemy_name} –Ω–∞–Ω–æ—Å–∏—Ç –≤–∞–º {enemy_attack} —É—Ä–æ–Ω–∞!")
        if player['hp'] <= 0:
            print("–í—ã –ø–∞–ª–∏ –≤ –±–æ—é...")
            return False
    return False


def puzzle_runes(player):
    """–ì–æ–ª–æ–≤–æ–ª–æ–º–∫–∞ —Å —Ä—É–Ω–∞–º–∏ ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ç–∞–π–Ω—ã–π –ø—Ä–æ—Ö–æ–¥."""
    print_slow(
        "–ù–∞ —Ç—Ä—ë—Ö –∫–æ–ª–æ–Ω–Ω–∞—Ö –≤—ã—Å–µ—á–µ–Ω—ã —Ä—É–Ω—ã: –û–≥–æ–Ω—å, –¢–µ–Ω—å, –ö—Ä–æ–≤—å. –ù–∞–¥–ø–∏—Å—å: ¬´–ò—Å—Ç–∏–Ω—É –∑–Ω–∞–µ—Ç –ª–∏—à—å —Ç–æ—Ç, –∫—Ç–æ –≤–∏–¥–∏—Ç —Å–∫–≤–æ–∑—å –º—Ä–∞–∫¬ª.")
    print("–í—ã–±–µ—Ä–∏—Ç–µ —Ä—É–Ω—É (1‚Äì3):")
    print("1. –û–≥–æ–Ω—å")
    print("2. –¢–µ–Ω—å")
    print("3. –ö—Ä–æ–≤—å")
    choice = input("> ")

    if choice == "2" and player['cunning'] >= 4:
        print_slow("–ö–æ–ª–æ–Ω–Ω—ã —Ä–∞–∑—ä–µ–∑–∂–∞—é—Ç—Å—è. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–æ—Ö–æ–¥ –≤ —Ç–∞–π–Ω—É—é –∫–∞–ø–µ–ª–ª—É.")
        return True
    else:
        print_slow("–†—É–Ω—ã —Ç—É—Å–∫–Ω–µ—é—Ç. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–Ω–∞—á–µ –∏–ª–∏ –∏—â–∏—Ç–µ –¥—Ä—É–≥–æ–π –ø—É—Ç—å.")
        return False


def puzzle_chimes(player):
    """–ì–æ–ª–æ–≤–æ–ª–æ–º–∫–∞ —Å –∫–æ–ª–æ–∫–æ–ª–∞–º–∏ ‚Äî —Ç—Ä–µ–±—É–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç–∏."""
    print_slow("–ü–µ—Ä–µ–¥ –≤–∞–º–∏ –ø—è—Ç—å –∫–æ–ª–æ–∫–æ–ª–æ–≤ —Ä–∞–∑–Ω–æ–π –≤—ã—Å–æ—Ç—ã. –ù–∞ —Å—Ç–µ–Ω–µ –Ω–∞–¥–ø–∏—Å—å: ¬´–°—ã–≥—Ä–∞–π –º–µ–ª–æ–¥–∏—é –∑–∞–±—ã—Ç—ã—Ö –∫–æ—Ä–æ–ª–µ–π¬ª.")
    print("–ü–æ—Ä—è–¥–æ–∫ –∑–≤–æ–Ω–∞ (–≤–≤–µ–¥–∏—Ç–µ —Ü–∏—Ñ—Ä—ã —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä: 3 1 5 2 4):")
    attempt = input("> ").split()

    # –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫: 2 4 1 5 3
    if attempt == ['2', '4', '1', '5', '3']:
        print_slow("–ö–æ–ª–æ–∫–æ–ª–∞ –∏–∑–¥–∞—é—Ç –≥–∞—Ä–º–æ–Ω–∏—á–Ω—ã–π –∑–≤–æ–Ω. –í —Å—Ç–µ–Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∏—à–∞ —Å –¥—Ä–µ–≤–Ω–∏–º –∫–ª–∏–Ω–∫–æ–º (+2 –∫ —Å–∏–ª–µ).")
        player['strength'] += 2
        return True
    else:
        correct = ['2', '4', '1', '5', '3']
        mistakes = sum(1 for i, val in enumerate(attempt) if i < len(correct) and val != correct[i])
        print_slow(f"–î–∏—Å—Å–æ–Ω–∞–Ω—Å! {mistakes} –æ—à–∏–±–æ–∫. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ –∏–ª–∏ –∏—â–∏—Ç–µ –∏–Ω–æ–π –ø—É—Ç—å.")
        return False


def npc_ghost_king(player):
    """–î–∏–∞–ª–æ–≥ —Å –ø—Ä–∏–∑—Ä–∞–∫–æ–º –ø—Ä–µ–∂–Ω–µ–≥–æ –∫–æ—Ä–æ–ª—è ‚Äî –∫–ª—é—á –∫ –º–∏—Ä–Ω–æ–π –∫–æ–Ω—Ü–æ–≤–∫–µ."""
    print_slow("–ò–∑ —Ç—É–º–∞–Ω–∞ –≤—ã—Å—Ç—É–ø–∞–µ—Ç –ø—Ä–∏–∑—Ä–∞–∫ –≤ –∫–æ—Ä–æ–Ω–µ. –ï–≥–æ –≥–æ–ª–æ—Å —ç—Ö–æ–º —Ä–∞–∑–Ω–æ—Å–∏—Ç—Å—è –ø–æ –∑–∞–ª—É.")
    print_slow("¬´–¢—ã –ø—Ä–∏—à—ë–ª —Å–≤–µ—Ä–≥–Ω—É—Ç—å —Ç–∏—Ä–∞–Ω–∞? –ó–Ω–∞–π: –æ–Ω ‚Äî –º–æ—ë –ø–∞–¥—à–µ–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ. –†–∞–∑—Ä—É—à—å —Ü–µ–ø—å –ø—Ä–æ–∫–ª—è—Ç–∏—è‚Ä¶¬ª")
    print("1. ¬´–ö–∞–∫ –º–Ω–µ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å?¬ª")
    print("2. ¬´–Ø —É–±—å—é –µ–≥–æ, –∫–∞–∫ –∏ –ø–æ–ª–æ–∂–µ–Ω–æ –≤–æ–∏–Ω—É.¬ª")
    print("3. ¬´–ü–æ—á–µ–º—É —Ç—ã –Ω–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª –µ–≥–æ?¬ª")

    choice = input("> ")

    if choice == "1":
        print_slow("–ü—Ä–∏–∑—Ä–∞–∫ —à–µ–ø—á–µ—Ç: ¬´–ù–∞–π–¥–∏ —Å–µ—Ä–¥—Ü–µ –∑–∞–ª–∞... –¢–∞–º, –≥–¥–µ —Å–≤–µ—Ç –∏ —Ç–µ–Ω—å –µ–¥–∏–Ω—ã.¬ª")
        return "hint"
    elif choice == "2":
        print_slow("–ü—Ä–∏–∑—Ä–∞–∫ –≤–∑–¥—ã—Ö–∞–µ—Ç: ¬´–ö—Ä–æ–≤—å –Ω–µ —Å–º–æ–µ—Ç —Ç—å–º—É‚Ä¶¬ª –ò—Å—á–µ–∑–∞–µ—Ç.")
        return "conflict"
    elif choice == "3":
        print_slow("¬´–Ø –±—ã–ª —Å–ª–∞–±... –ù–æ —Ç—ã –º–æ–∂–µ—à—å –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ—à–ª–æ–µ.¬ª –î–∞—ë—Ç –≤–∞–º –∫—Ä–∏—Å—Ç–∞–ª–ª –ø–∞–º—è—Ç–∏.")
        player['inventory'].append("–∫—Ä–∏—Å—Ç–∞–ª–ª –ø–∞–º—è—Ç–∏")
        return "peace"
    else:
        print_slow("–ü—Ä–∏–∑—Ä–∞–∫ –∏—Å—á–µ–∑–∞–µ—Ç, –Ω–µ –¥–æ–∂–¥–∞–≤—à–∏—Å—å –æ—Ç–≤–µ—Ç–∞.")
        return None


def craft_torch(player):
    """–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–∫–µ–ª–∞ –∏–∑ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤."""
    if '–≤–µ—Ç–æ—à—å' in player['inventory'] and '—Å–º–æ–ª–∞' in player['inventory']:
        print_slow("–í—ã —Å–º–∞—Å—Ç–µ—Ä–∏–ª–∏ —Ñ–∞–∫–µ–ª. –¢–µ–ø–µ—Ä—å —Ç–µ–º–Ω–æ—Ç–∞ –Ω–µ —Ç–∞–∫ —Å—Ç—Ä–∞—à–Ω–∞.")
        player['inventory'].remove('–≤–µ—Ç–æ—à—å')
        player['inventory'].remove('—Å–º–æ–ª–∞')
        player['inventory'].append('—Ñ–∞–∫–µ–ª')
        player['light'] = 3  # 3 —Ö–æ–¥–∞ —Å –æ—Å–≤–µ—â–µ–Ω–∏–µ–º
    else:
        print_slow("–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤: –≤–µ—Ç–æ—à—å –∏ —Å–º–æ–ª–∞.")


def main():
    print_slow("–¢—ë–º–Ω—ã–µ –∑–µ–º–ª–∏ –ú–æ—Ä–¥—Ä–∞–≥–∞. –í–µ–∫–æ–≤–∞—è —Ç—å–º–∞ –ø–æ–≥–ª–æ—Ç–∏–ª–∞ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ.")
    print_slow("–í—ã ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–π –∏–∑ –æ—Ä–¥–µ–Ω–∞ –°–µ—Ä–µ–±—Ä—è–Ω–æ–≥–æ –©–∏—Ç–∞. –í–∞—à–∞ —Ü–µ–ª—å: –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ü—Ä–æ–∫–ª—è—Ç–æ–≥–æ –ö–æ—Ä–æ–ª—è.")

    # –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
    print("\n–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ 12 –æ—á–∫–æ–≤ –º–µ–∂–¥—É —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ (–∫–∞–∂–¥–∞—è –æ—Ç 1 –¥–æ 6):")
    while True:
        try:
            strength = int(input("–°–∏–ª–∞ (–∞—Ç–∞–∫–∞): "))
            stamina = int(input("–í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å (HP): "))
            cunning = int(input("–•–∏—Ç—Ä–æ—Å—Ç—å (—É–∫–ª–æ–Ω–µ–Ω–∏–µ/–≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∏): "))

            if (strength + stamina + cunning == 12 and
                    1 <= strength <= 6 and
                    1 <= stamina <= 6 and
                    1 <= cunning <= 6):
                break
            else:
                print("–°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 12, –∫–∞–∂–¥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç 1 –¥–æ 6. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.")
        except ValueError:
            print("–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–∞.")

    player = {
        'strength': strength,
        'stamina': stamina,
        'cunning': cunning,
        'hp': stamina * 10,
        'potions': 2,
        'has_relic': False,
        'inventory': [],
        'light': 0  # –æ—Å—Ç–∞—Ç–æ—á–Ω—ã–µ —Ö–æ–¥—ã —Å —Ñ–∞–∫–µ–ª–æ–º
    }

    print(f"\n–í–∞—à–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:")
    print(f"–°–∏–ª–∞: {player['strength']}, –í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å: {player['stamina']}, –•–∏—Ç—Ä–æ—Å—Ç—å: {player['cunning']}")
    print(f"–ó–¥–æ—Ä–æ–≤—å–µ: {player['hp']}, –ó–µ–ª–∏–π: {player['potions']}, –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å: {player['inventory']}")

    # –õ–û–ö–ê–¶–ò–Ø 1: –ó–ê–ë–†–û–®–ï–ù–ù–´–ô –ú–û–ù–ê–°–¢–´–†–¨ (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è)
    print_slow("\n" + "=" * 50)
    print_slow("          –ó–ê–ë–†–û–®–ï–ù–ù–´–ô –ú–û–ù–ê–°–¢–´–†–¨")
    print_slow("=" * 50)
    print_slow("–†—É–∏–Ω—ã –º–æ–Ω–∞—Å—Ç—ã—Ä—è –æ–∫—É—Ç–∞–Ω—ã —Ç—É–º–∞–Ω–æ–º. –í–µ—Ç–µ—Ä –Ω–æ—Å–∏—Ç –æ–±—Ä—ã–≤–∫–∏ –¥—Ä–µ–≤–Ω–∏—Ö –º–æ–ª–∏—Ç–≤.")
    print_slow("–ü–µ—Ä–µ–¥ –≤–∞–º–∏ —Ç—Ä–∏ –ø—É—Ç–∏:\n"
               "1. –ì–ª–∞–≤–Ω—ã–µ –≤—Ä–∞—Ç–∞ (–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è)\n"
               "2. –°–µ–≤–µ—Ä–Ω—ã–π —Ñ–ª–∏–≥–µ–ª—å (–∑–∞–±—Ä–æ—à–µ–Ω–Ω–∞—è —Ç—Ä–∞–ø–µ–∑–Ω–∞—è)\n"
               "3. –Æ–∂–Ω—ã–π –¥–≤–æ—Ä (–∫–æ–ª–æ–¥–µ—Ü –∏ —Å–∞–¥)")

    monastery_completed = False
    while not monastery_completed:
        choice = input("> ")

        if choice == "1":
            print_slow("–í—Ä–∞—Ç–∞ –æ—Ö—Ä–∞–Ω—è—é—Ç –¥–≤–∞ –°–∫–µ–ª–µ—Ç–∞‚Äë—Å—Ç—Ä–∞–∂–∞!")
            if not battle(player, "–°–∫–µ–ª–µ—Ç‚Äë—Å—Ç—Ä–∞–∂", 25, 8, "–°–∫—Ä–∏–ø—è –∫–æ—Å—Ç—è–º–∏, —Å–∫–µ–ª–µ—Ç—ã –±—Ä–æ—Å–∞—é—Ç—Å—è –Ω–∞ –≤–∞—Å!"):
                return
            print_slow("–ü—Ä–æ—Ö–æ–¥ –æ—Ç–∫—Ä—ã—Ç. –í—ã –≤–∏–¥–∏—Ç–µ –∞–ª—Ç–∞—Ä–Ω—É—é –∫–æ–º–Ω–∞—Ç—É –≤–¥–∞–ª–∏.")
            monastery_completed = True

        elif choice == "2":
            print_slow("–í—ã –≤—Ö–æ–¥–∏—Ç–µ –≤ —Ç—Ä–∞–ø–µ–∑–Ω—É—é. –ü—ã–ª—å –ø–æ–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç–æ–ª—ã, –Ω–∞ —Å—Ç–µ–Ω–µ ‚Äî –ø–æ–ª—É—Å—Ç—ë—Ä—Ç—ã–π —Ñ—Ä–µ—Å–∫–æ–≤—ã–π —Ü–∏–∫–ª.")
            if player['cunning'] >= 4:
                print_slow("–í—ã –∑–∞–º–µ—á–∞–µ—Ç–µ —Å–∫—Ä—ã—Ç—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –∑–∞ —Ñ—Ä–µ—Å–∫–æ–π. –ù–∞–∂–∏–º–∞–µ—Ç–µ ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ç–∞–π–Ω–∏–∫!")
                loot = random.choice(['–∑–µ–ª—å–µ', '–≤–µ—Ç–æ—à—å', '–¥—Ä–µ–≤–Ω–∏–π –º–µ–¥–∞–ª—å–æ–Ω'])
                player['inventory'].append(loot)
                print(f"–í—ã –Ω–∞—à–ª–∏: {loot}!")
            else:
                print_slow("–ù–∏—á–µ–≥–æ –ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ–≥–æ. –ù–æ –≤—ã —Å–ª—ã—à–∏—Ç–µ —à–æ—Ä–æ—Ö –∏–∑ —Å–æ—Å–µ–¥–Ω–µ–π –∫–æ–º–Ω–∞—Ç—ã...")
                if roll_dice() >= 4:
                    print_slow("–ò–∑ —Ç–µ–º–Ω–æ—Ç—ã –≤—ã—Å–∫–∞–∫–∏–≤–∞–µ—Ç –∫—Ä—ã—Å–∞‚Äë–º—É—Ç–∞–Ω—Ç!")
                    if not battle(player, "–ö—Ä—ã—Å–∞‚Äë–º—É—Ç–∞–Ω—Ç", 15, 6, "–û—Å—Ç—Ä—ã–µ –∑—É–±—ã —Å–≤–µ—Ä–∫–∞—é—Ç –≤ –ø–æ–ª—É–º—Ä–∞–∫–µ!"):
                        return
                else:
                    print_slow("–®–æ—Ä–æ—Ö –∑–∞—Ç–∏—Ö–∞–µ—Ç. –í—ã —Ä–µ—à–∞–µ—Ç–µ —É–π—Ç–∏.")

        elif choice == "3":
            print_slow("–í–æ –¥–≤–æ—Ä–µ ‚Äî –∑–∞—Ä–æ—Å—à–∏–π —Å–∞–¥ –∏ –∫–æ–ª–æ–¥–µ—Ü. –í–æ–∑–¥—É—Ö –∑–¥–µ—Å—å —á–∏—â–µ.")
            print("1. –û—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–ª–æ–¥–µ—Ü")
            print("2. –ü—Ä–æ–π—Ç–∏ –≤ –±–æ–∫–æ–≤—É—é —á–∞—Å–æ–≤–Ω—é")
            sub_choice = input("> ")

            if sub_choice == "1":
                if '–≤—ë–¥—Ä–æ' in player['inventory']:
                    print_slow("–í—ã –¥–æ—Å—Ç–∞—ë—Ç–µ –≤–æ–¥—É. –û–Ω–∞ —Å–≤–µ—Ç–∏—Ç—Å—è –º—è–≥–∫–∏–º —Å–≤–µ—Ç–æ–º! –í—ã–ø–∏–≤–∞–µ—Ç–µ (+10 HP).")
                    player['hp'] += 10
                else:
                    print_slow("–ö–æ–ª–æ–¥–µ—Ü –≥–ª—É–±–æ–∫–∏–π. –ë–µ–∑ –≤—ë–¥—Ä–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–æ—Å—Ç–∞—Ç—å.")
                    if roll_dice() == 6:
                        print_slow("–í—ã –∑–∞–º–µ—á–∞–µ—Ç–µ –≤—ë–¥—Ä–æ —É —Å—Ç–µ–Ω—ã! –î–æ–±–∞–≤–ª—è–µ—Ç–µ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å.")
                        player['inventory'].append('–≤—ë–¥—Ä–æ')
            elif sub_choice == "2":
                print_slow("–í —á–∞—Å–æ–≤–Ω–µ ‚Äî —Å—Ç–∞—Ç—É—è —Å–≤—è—Ç–æ–≥–æ. –£ –æ—Å–Ω–æ–≤–∞–Ω–∏—è ‚Äî —Ç—Ä–µ—â–∏–Ω–∞.")
                if puzzle_runes(player):
                    print_slow("–°—Ç–∞—Ç—É—è –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è. –ó–∞ –Ω–µ–π ‚Äî —Ç–∞–π–Ω—ã–π —Ö–æ–¥ –≤ –ø–æ–¥–∑–µ–º–µ–ª—å—è!")
                    monastery_completed = True
                else:
                    print_slow("–ù–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç. –í—ã —É—Ö–æ–¥–∏—Ç–µ.")

        else:
            print_slow("–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.")

    # –ù–∞—Ö–æ–¥–∏–º –†–µ–ª–∏–∫–≤–∏—é
    print_slow("\n–í—ã –≤—Ö–æ–¥–∏—Ç–µ –≤ –∞–ª—Ç–∞—Ä–Ω—É—é –∫–æ–º–Ω–∞—Ç—É. –í —Ü–µ–Ω—Ç—Ä–µ ‚Äî —Å–∏—è—é—â–∏–π –∫–∞–º–µ–Ω—å –Ω–∞ –ø–æ—Å—Ç–∞–º–µ–Ω—Ç–µ.")
    print_slow("–≠—Ç–æ –†–µ–ª–∏–∫–≤–∏—è –°–≤–µ—Ç–∞. –í–∑—è—Ç—å –µ—ë? (–¥–∞/–Ω–µ—Ç)")
    if input("> ").lower() == "–¥–∞":
        player['has_relic'] = True
        print_slow("–†–µ–ª–∏–∫–≤–∏—è –ø—É–ª—å—Å–∏—Ä—É–µ—Ç –≤ –≤–∞—à–∏—Ö —Ä—É–∫–∞—Ö. –í—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ –ø—Ä–∏–ª–∏–≤ —Å–∏–ª (+15 HP).")
        player['hp'] += 15

    # –õ–û–ö–ê–¶–ò–Ø 2: –ü–û–î–ó–ï–ú–ï–õ–¨–Ø (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è)
    print_slow("\n" + "=" * 50)
    print_slow("          –ü–û–î–ó–ï–ú–ï–õ–¨–Ø –ú–û–ù–ê–°–¢–´–†–Ø")
    print_slow("=" * 50)
    print_slow("–°—ã—Ä–æ–π –≤–æ–∑–¥—É—Ö, –∫–∞–ø–ª–∏ –≤–æ–¥—ã —Å—Ç—É—á–∞—Ç –ø–æ –∫–∞–º–Ω—é. –¢—Ä–∏ –ø—É—Ç–∏ —Ä–∞—Å—Ö–æ–¥—è—Ç—Å—è –≤–æ —Ç—å–º—É:\n"
               "1. –ì–ª–∞–≤–Ω—ã–π —Ç—É–Ω–Ω–µ–ª—å (–≤–µ–¥—ë—Ç –∫ —Ç—Ä–æ–Ω–Ω–æ–º—É –∑–∞–ª—É)\n"
               "2. –ë–æ–∫–æ–≤—ã–µ –∫–∞–º–µ—Ä—ã (—Å—Ç—Ä–∞–Ω–Ω—ã–µ –∑–≤—É–∫–∏ –∏–∑-–∑–∞ –¥–≤–µ—Ä–µ–π)\n"
               "3. –î—Ä–µ–Ω–∞–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (—É–∑–∫–∏–µ –ø—Ä–æ—Ö–æ–¥—ã)")

    dungeon_completed = False
    while not dungeon_completed:
        choice = input("> ")

        if choice == "1":
            print_slow("–í—ã –∏–¥—ë—Ç–µ –ø–æ –≥–ª–∞–≤–Ω–æ–º—É —Ç—É–Ω–Ω–µ–ª—é. –í–Ω–µ–∑–∞–ø–Ω–æ –ø–æ–ª –ø—Ä–æ–≤–∞–ª–∏–≤–∞–µ—Ç—Å—è!")
            fall_damage = roll_dice() * 5
            player['hp'] -= fall_damage
            print(f"–í—ã —É–ø–∞–ª–∏ –≤ —è–º—É! -{fall_damage} HP.")
            if player['hp'] <= 0:
                print_slow("–í—ã –Ω–µ —Å–º–æ–≥–ª–∏ –ø–æ–¥–Ω—è—Ç—å—Å—è...")
                return
            print_slow("–° —Ç—Ä—É–¥–æ–º –≤—ã –≤—ã–±–∏—Ä–∞–µ—Ç–µ—Å—å –∏ –≤–∏–¥–∏—Ç–µ –ø—Ä–æ—Ö–æ–¥ –≤–ø–µ—Ä—ë–¥.")
            dungeon_completed = True

        elif choice == "2":
            print_slow("–í—ã –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ –¥–≤–µ—Ä—å –≤ –∫–∞–º–µ—Ä—É. –í–Ω—É—Ç—Ä–∏ ‚Äî —Å—Ç–∞—Ä—ã–π –∞–ª—Ö–∏–º–∏–∫!")
            print_slow("–û–Ω –≥–æ–≤–æ—Ä–∏—Ç: ¬´–ü–æ–º–æ–∂–µ—à—å –º–Ω–µ —Å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–º? –í –Ω–∞–≥—Ä–∞–¥—É –¥–∞–º –∑–µ–ª—å–µ¬ª.")
            print("1. –°–æ–≥–ª–∞—Å–∏—Ç—å—Å—è")
            print("2. –ê—Ç–∞–∫–æ–≤–∞—Ç—å")
            print("3. –£–π—Ç–∏")
            sub_choice = input("> ")

            if sub_choice == "1":
                if player['cunning'] >= 5:
                    print_slow("–í—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–º–µ—à–∏–≤–∞–µ—Ç–µ —Ä–µ–∞–≥–µ–Ω—Ç—ã. –ê–ª—Ö–∏–º–∏–∫ –¥–æ–≤–æ–ª–µ–Ω! –î–∞—ë—Ç –≤–∞–º –º–æ—â–Ω–æ–µ –∑–µ–ª—å–µ (+30 HP).")
                    player['hp'] += 30
                else:
                    explosion = roll_dice() * 3
                    print_slow(f"–í–∑—Ä—ã–≤! -{explosion} HP. –ê–ª—Ö–∏–º–∏–∫ —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω.")
                    player['hp'] -= explosion
                    if player['hp'] <= 0:
                        print_slow("–í—ã –ø–æ–≥–∏–±–ª–∏ –≤ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏...")
                        return
            elif sub_choice == "2":
                if battle(player, "–ê–ª—Ö–∏–º–∏–∫‚Äë–Ω–µ–∫—Ä–æ–º–∞–Ω—Ç", 20, 7, "–û–Ω –ø–æ–¥–Ω–∏–º–∞–µ—Ç –º—ë—Ä—Ç–≤—ã—Ö –∫—Ä—ã—Å!"):
                    print_slow("–í—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ –≤ –µ–≥–æ —Å—É–º–∫–µ —Ä–µ–¥–∫–æ–µ –∑–µ–ª—å–µ (+25 HP).")
                    player['hp'] += 25
                else:
                    return
            # –í –ª—é–±–æ–º —Å–ª—É—á–∞–µ –ø–æ—Å–ª–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∏–¥—ë–º –¥–∞–ª—å—à–µ
            dungeon_completed = True

        elif choice == "3":
            print_slow("–í—ã –ø–æ–ª–∑—ë—Ç–µ –ø–æ –¥—Ä–µ–Ω–∞–∂–Ω—ã–º —Ç—Ä—É–±–∞–º. –¢–µ—Å–Ω–æ –∏ —Å–∫–æ–ª—å–∑–∫–æ.")
            if roll_dice() + player['cunning'] >= 7:
                print_slow("–í—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–π –ø—É—Ç—å –∫ –≤—ã—Ö–æ–¥—É –∏–∑ –ø–æ–¥–∑–µ–º–µ–ª–∏–π!")
                dungeon_completed = True
            else:
                trap = roll_dice() * 4
                print_slow(f"–õ–æ–≤—É—à–∫–∞! –ö–æ–ª—å—è —Ä–∞–Ω—è—Ç –≤–∞—Å. -{trap} HP.")
                player['hp'] -= trap
                if player['hp'] <= 0:
                    print_slow("–í—ã –∑–∞—Å—Ç—Ä—è–ª–∏ –≤ —Ç—Ä—É–±–µ...")
                    return

        else:
            print_slow("–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.")

    # –ö—Ä–∞—Ñ—Ç —Ñ–∞–∫–µ–ª–∞, –µ—Å–ª–∏ –µ—Å—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã
    if '–≤–µ—Ç–æ—à—å' in player['inventory'] and '—Å–º–æ–ª–∞' in player['inventory']:
        print_slow("–£ –≤–∞—Å –µ—Å—Ç—å –≤–µ—Ç–æ—à—å –∏ —Å–º–æ–ª–∞. –•–æ—Ç–∏—Ç–µ —Å–¥–µ–ª–∞—Ç—å —Ñ–∞–∫–µ–ª? (–¥–∞/–Ω–µ—Ç)")
        if input("> ").lower() == "–¥–∞":
            craft_torch(player)

    # –õ–û–ö–ê–¶–ò–Ø 3: –¢–†–û–ù–ù–´–ô –ó–ê–õ
    print_slow("\n" + "=" * 50)
    print_slow("          –¢–†–û–ù–ù–´–ô –ó–ê–õ –ü–†–û–ö–õ–Ø–¢–û–ì–û –ö–û–†–û–õ–Ø")
    print_slow("=" * 50)
    print_slow("–ó–∞–ª –æ–≥—Ä–æ–º–µ–Ω. –ü–æ—Ç–æ–ª–æ–∫ —Ç–µ—Ä—è–µ—Ç—Å—è –≤–æ —Ç—å–º–µ. –í —Ü–µ–Ω—Ç—Ä–µ ‚Äî —á—ë—Ä–Ω—ã–π —Ç—Ä–æ–Ω, –æ–∫—É—Ç–∞–Ω–Ω—ã–π –≤–∏—Ö—Ä—è–º–∏ —Ç—å–º—ã.")
    print_slow("–¢—Ä–∏ –ø—É—Ç–∏ –≤–µ–¥—É—Ç –∫ —Ç—Ä–æ–Ω—É: \n"
               "1. –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ö–æ–¥ (–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å—Ç—Ä–∞–∂–∞–º–∏)\n"
               "2. –ë–æ–∫–æ–≤—ã–µ –≥–∞–ª–µ—Ä–µ–∏ (—Ç—ë–º–Ω—ã–µ –∏ –ø–æ–ª–Ω—ã–µ –ª–æ–≤—É—à–µ–∫)\n"
               "3. –¢–∞–π–Ω—ã–π —Ö–æ–¥ –∑–∞ –≥–æ–±–µ–ª–µ–Ω–æ–º (–µ—Å–ª–∏ –µ—Å—Ç—å —Ñ–∞–∫–µ–ª)")

    throne_room_completed = False
    while not throne_room_completed:
        choice = input("> ")

        if choice == "1":
            print_slow("–ù–∞ –ø—É—Ç–∏ –≤—Å—Ç–∞—é—Ç –¥–≤–∞ –ß—ë—Ä–Ω—ã—Ö –°—Ç—Ä–∞–∂–∞!")
            if not battle(player, "–ß—ë—Ä–Ω—ã–π –°—Ç—Ä–∞–∂", 35, 11, "–°—Ç—Ä–∞–∂–∏ –≤–∑–º–∞—Ö–∏–≤–∞—é—Ç –∫–ª–∏–Ω–∫–∞–º–∏ –∏–∑ —Ç—å–º—ã!"):
                return
            print_slow("–ü—Ä–æ—Ö–æ–¥ –æ—Ç–∫—Ä—ã—Ç. –í—ã –≤–∏–¥–∏—Ç–µ —Ç—Ä–æ–ø –∫ —Ç—Ä–æ–Ω—É.")
            throne_room_completed = True

        elif choice == "2":
            print_slow("–í—ã –∫—Ä–∞–¥—ë—Ç–µ—Å—å –ø–æ –±–æ–∫–æ–≤–æ–π –≥–∞–ª–µ—Ä–µ–µ. –°–ª—ã—à–Ω—ã —à–æ—Ä–æ—Ö–∏...")
            if roll_dice() + player['cunning'] >= 8:
                print_slow("–í—ã –∏–∑–±–µ–≥–∞–µ—Ç–µ –ª–æ–≤—É—à–µ–∫ –∏ –Ω–∞—Ö–æ–¥–∏—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–π –ø—É—Ç—å –∫ —Ç—Ä–æ–Ω—É.")
                throne_room_completed = True
            else:
                trap_damage = roll_dice() * 5
                print_slow(f"–í—ã –ø–æ–ø–∞–¥–∞–µ—Ç–µ –≤ –ª–æ–≤—É—à–∫—É! –ö–æ–ª—å—è –ø—Ä–æ–Ω–∑–∞—é—Ç –≤–∞—Å. -{trap_damage} HP.")
                player['hp'] -= trap_damage
                if player['hp'] <= 0:
                    print_slow("–í—ã –Ω–µ —Å–º–æ–≥–ª–∏ –ø–µ—Ä–µ–∂–∏—Ç—å —Ä–∞–Ω–µ–Ω–∏—è...")
                    return
                print_slow("–ü—Ä–∏—Ö—Ä–∞–º—ã–≤–∞—è, –≤—ã –≤—Å—ë –∂–µ –Ω–∞—Ö–æ–¥–∏—Ç–µ –ø—Ä–æ—Ö–æ–¥ –∫ —Ç—Ä–æ–Ω—É.")
                throne_room_completed = True

        elif choice == "3" and player['light'] > 0:
            print_slow(
                "–§–∞–∫–µ–ª –æ—Å–≤–µ—â–∞–µ—Ç —Ç–∞–π–Ω—ã–π —Ö–æ–¥ –∑–∞ –≥–æ–±–µ–ª–µ–Ω–æ–º. –í—ã –Ω–µ–∑–∞–º–µ—Ç–Ω–æ –ø—Ä–æ–±–∏—Ä–∞–µ—Ç–µ—Å—å –∫ –∑–∞–¥–Ω–µ–π —á–∞—Å—Ç–∏ —Ç—Ä–æ–Ω–Ω–æ–≥–æ –∑–∞–ª–∞.")
            print_slow("–ó–¥–µ—Å—å –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ –¥—Ä–µ–≤–Ω–∏–π –∞–ª—Ç–∞—Ä—å —Å –Ω–∞–¥–ø–∏—Å—å—é: ¬´–°–≤–µ—Ç —Ä–∞–∑–≥–æ–Ω—è–µ—Ç —Ç—å–º—É¬ª.")
            if player['has_relic']:
                print_slow(
                    "–†–µ–ª–∏–∫–≤–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–≤–µ—Ç–∏—Ç—å—Å—è. –ê–ª—Ç–∞—Ä—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ç–∞–π–Ω—É—é –Ω–∏—à—É —Å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–º (+3 –∫ —Å–∏–ª–µ).")
                player['strength'] += 3
            throne_room_completed = True

        elif choice == "3" and player['light'] == 0:
            print_slow("–ë–µ–∑ —Å–≤–µ—Ç–∞ –≤—ã –Ω–µ –≤–∏–¥–∏—Ç–µ —Ç–∞–π–Ω–æ–≥–æ —Ö–æ–¥–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø—É—Ç—å.")

        else:
            print_slow("–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.")

    # –§–∏–Ω–∞–ª—å–Ω–∞—è —Ñ–∞–∑–∞: –ø—Ä–æ—Ç–∏–≤–æ—Å—Ç–æ—è–Ω–∏–µ –ö–æ—Ä–æ–ª—é
    print_slow("\n" + "-" * 40)
    print_slow("–¶–ï–ù–¢–† –ó–ê–õ–ê. –ü–ï–†–ï–î –¢–†–û–ù–û–ú")
    print_slow("-" * 40)

    if player['has_relic']:
        print_slow("–†–µ–ª–∏–∫–≤–∏—è –≤—Å–ø—ã—Ö–∏–≤–∞–µ—Ç –æ—Å–ª–µ–ø–∏—Ç–µ–ª—å–Ω—ã–º —Å–≤–µ—Ç–æ–º! –ö–æ—Ä–æ–ª—å –≤—Å–∫—Ä–∏–∫–∏–≤–∞–µ—Ç –æ—Ç –±–æ–ª–∏.")

    print_slow("–ö–æ—Ä–æ–ª—å –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è —Å —Ç—Ä–æ–Ω–∞. –ï–≥–æ –≥–æ–ª–æ—Å –≥—Ä–µ–º–∏—Ç: ¬´–¢—ã –¥—É–º–∞–ª, —á—Ç–æ –º–æ–∂–µ—à—å –º–µ–Ω—è –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å?¬ª")
    print_slow("–ü–µ—Ä–µ–¥ –≤–∞–º–∏ —Ç—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞:\n"
               "1. –ê—Ç–∞–∫–æ–≤–∞—Ç—å –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –±–æ—é\n"
               "2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–ª–∏–∫–≤–∏—é –¥–ª—è –∏–∑–≥–Ω–∞–Ω–∏—è\n"
               "3. –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è —Ä–∞–∑–≥–∞–¥–∞—Ç—å —Ç–∞–π–Ω—É –∑–∞–ª–∞")

    final_choice = input("> ")

    if final_choice == "1":
        boss_hp = 70 if player['has_relic'] else 80
        boss_attack = 13 if player['has_relic'] else 15
        if battle(player, "–ü—Ä–æ–∫–ª—è—Ç—ã–π –ö–æ—Ä–æ–ª—å", boss_hp, boss_attack,
                  "–ö–æ—Ä–æ–ª—å –æ–±—Ä—É—à–∏–≤–∞–µ—Ç –Ω–∞ –≤–∞—Å —à–∫–≤–∞–ª —Ç—ë–º–Ω–æ–π –º–∞–≥–∏–∏!"):
            print_slow("–í—ã –ø–æ–±–µ–¥–∏–ª–∏ –ü—Ä–æ–∫–ª—è—Ç–æ–≥–æ –ö–æ—Ä–æ–ª—è! –¢—å–º–∞ —Ä–∞—Å—Å–µ–∏–≤–∞–µ—Ç—Å—è.")
            print_slow("–õ—É—á–∏ —Å–≤–µ—Ç–∞ –ø—Ä–æ–Ω–∏–∫–∞—é—Ç –≤ –∑–∞–ª. –ö–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ —Å–ø–∞—Å–µ–Ω–æ!")
            print_slow("–ü–û–ë–ï–î–ê! –í—ã ‚Äî –≥–µ—Ä–æ–π –ú–æ—Ä–¥—Ä–∞–≥–∞.")
        else:
            print_slow("–ö–æ—Ä–æ–ª—å –ø–æ–≥–ª–æ—â–∞–µ—Ç –≤–∞—à—É –¥—É—à—É. –¢—å–º–∞ –ø–æ–±–µ–∂–¥–∞–µ—Ç –Ω–∞–≤—Å–µ–≥–¥–∞...")

    elif final_choice == "2" and player['has_relic']:
        print_slow("–í—ã –ø–æ–¥–Ω–∏–º–∞–µ—Ç–µ –†–µ–ª–∏–∫–≤–∏—é. –°–≤–µ—Ç –∑–∞–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ª!")
        print_slow("–ö–æ—Ä–æ–ª—å –∫—Ä–∏—á–∏—Ç: ¬´–ù–µ—Ç!..¬ª ‚Äî –∏ —Ä–∞—Å—Ç–≤–æ—Ä—è–µ—Ç—Å—è –≤ —Å–∏—è–Ω–∏–∏.")
        print_slow("–¢—å–º–∞ –æ—Ç—Å—Ç—É–ø–∞–µ—Ç. –ù–∞ —Ç—Ä–æ–Ω–µ –æ—Å—Ç–∞—ë—Ç—Å—è –ª–∏—à—å –∫–æ—Ä–æ–Ω–∞ —Å–≤–µ—Ç–∞.")
        print_slow("–í–´ –ü–û–ë–ï–î–ò–õ–ò –ë–ï–ó –ö–†–û–í–û–ü–†–û–õ–ò–¢–ò–Ø. –ú–ò–† –í–û–ó–í–†–ê–©–Å–ù.")

    elif final_choice == "3":
        print_slow("–í—ã –æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç–µ –∑–∞–ª –≤ –ø–æ–∏—Å–∫–∞—Ö –ø–æ–¥—Å–∫–∞–∑–∫–∏...")
        puzzle_result = puzzle_runes(player) or puzzle_chimes(player)

        if puzzle_result:
            print_slow(
                "–¢–∞–π–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –¥–≤–∏–∂–µ–Ω–∏–µ. –°—Ç–µ–Ω–∞ —Ä–∞–∑—ä–µ–∑–∂–∞–µ—Ç—Å—è, –æ—Ç–∫—Ä—ã–≤–∞—è –ø—É—Ç—å –∫ –¥—É—Ö—É –ø—Ä–µ–∂–Ω–µ–≥–æ –∫–æ—Ä–æ–ª—è.")
            king_response = npc_ghost_king(player)

            if king_response == "peace" and "–∫—Ä–∏—Å—Ç–∞–ª–ª –ø–∞–º—è—Ç–∏" in player['inventory']:
                print_slow("–ö—Ä–∏—Å—Ç–∞–ª–ª –ø–∞–º—è—Ç–∏ —Å–æ–µ–¥–∏–Ω—è–µ—Ç —Ä–∞–∑–æ—Ä–≤–∞–Ω–Ω—ã–µ –¥—É—à–∏. –ö–æ—Ä–æ–ª—å –∏ –µ–≥–æ –ø—Ä–∏–∑—Ä–∞–∫ –≤–æ—Å—Å–æ–µ–¥–∏–Ω—è—é—Ç—Å—è.")
                print_slow("–ü—Ä–æ–∫–ª—è—Ç–∏–µ —Ä–∞–∑—Ä—É—à–µ–Ω–æ. –ó–∞–ª –Ω–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–≤–µ—Ç–æ–º –º–∏—Ä–Ω–æ–≥–æ –≤–æ—Å—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.")
                print_slow("–ò–°–¢–ò–ù–ù–ê–Ø –ö–û–ù–¶–û–í–ö–ê: –í–´ –ü–†–ò–ù–ï–°–õ–ò –ò–°–¶–ï–õ–ï–ù–ò–ï.")
            elif king_response == "hint":
                print_slow("–°–ª–µ–¥—É—è —Å–æ–≤–µ—Ç—É –ø—Ä–∏–∑—Ä–∞–∫–∞, –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ —Å–ª–∞–±–æ–µ –º–µ—Å—Ç–æ –ö–æ—Ä–æ–ª—è. –†–µ—à–∞—é—â–∞—è –∞—Ç–∞–∫–∞ —É—Å–ø–µ—à–Ω–∞!")
                print_slow("–ü–æ–±–µ–¥–∞! –ù–æ —Ü–µ–Ω–∞ –≤—ã—Å–æ–∫–∞...")
            else:
                print_slow("–í—Ä–µ–º—è —É–ø—É—â–µ–Ω–æ. –ö–æ—Ä–æ–ª—å –∞—Ç–∞–∫—É–µ—Ç!")
                if not battle(player, "–ü—Ä–æ–∫–ª—è—Ç—ã–π –ö–æ—Ä–æ–ª—å (—è—Ä–æ—Å—Ç–Ω—ã–π)", 60, 16):
                    print_slow("–í—ã –ø–∞–ª–∏ –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–π –±–∏—Ç–≤–µ...")
                else:
                    print_slow("–í—ã –ø–æ–±–µ–¥–∏–ª–∏, –Ω–æ —Ç—å–º–∞ –æ—Å—Ç–∞–≤–∏–ª–∞ —Å–ª–µ–¥ –≤ –≤–∞—à–µ–π –¥—É—à–µ...")
        else:
            print_slow("–í—ã –Ω–µ —É—Å–ø–µ–ª–∏ —Ä–∞–∑–≥–∞–¥–∞—Ç—å —Ç–∞–π–Ω—É. –ö–æ—Ä–æ–ª—å –∞—Ç–∞–∫—É–µ—Ç!")
            if not battle(player, "–ü—Ä–æ–∫–ª—è—Ç—ã–π –ö–æ—Ä–æ–ª—å", 70, 14):
                print_slow("–¢—å–º–∞ –ø–æ–≥–ª–æ—Ç–∏–ª–∞ –≤–∞—Å...")
            else:
                print_slow("–í—ã –ø–æ–±–µ–¥–∏–ª–∏ —Ü–µ–Ω–æ–π –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—ã—Ö —É—Å–∏–ª–∏–π. –ù–æ –≤–æ–ø—Ä–æ—Å—ã –æ—Å—Ç–∞–ª–∏—Å—å...")

    else:
        print_slow("–ü—Ä–æ–º–µ–¥–ª–µ–Ω–∏–µ —Å–º–µ—Ä—Ç–∏ –ø–æ–¥–æ–±–Ω–æ! –ö–æ—Ä–æ–ª—å –æ–±—Ä—É—à–∏–≤–∞–µ—Ç –Ω–∞ –≤–∞—Å —Ñ–∏–Ω–∞–ª—å–Ω—É—é –∞—Ç–∞–∫—É.")
        if not battle(player, "–ü—Ä–æ–∫–ª—è—Ç—ã–π –ö–æ—Ä–æ–ª—å ‚Äî –ü–æ—Å–ª–µ–¥–Ω–∏–π –£–¥–∞—Ä", 50, 18):
            print_slow("–í—ã –Ω–µ –≤—ã–¥–µ—Ä–∂–∞–ª–∏ –Ω–∞—Ç–∏—Å–∫–∞ —Ç—å–º—ã...")
        else:
            print_slow("–ß—É–¥–æ–º –≤—ã –≤—ã–∂–∏–ª–∏. –ù–æ —Ç—Ä–æ–Ω –ø—É—Å—Ç, –∞ —Ç—å–º–∞ –≤—Å—ë –µ—â—ë –≤–∏—Ç–∞–µ—Ç –≤ –∑–∞–ª–µ...")

    # –§–∏–Ω–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω
    print_slow("\n" + "=" * 50)
    print_slow("–ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê")
    print_slow("=" * 50)
    print(f"–í–∞—à–∏ –∏—Ç–æ–≥–æ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:")
    print(f"–°–∏–ª–∞: {player['strength']}, –í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å: {player['stamina']}, –•–∏—Ç—Ä–æ—Å—Ç—å: {player['cunning']}")
    print(f"–ó–¥–æ—Ä–æ–≤—å–µ: {player['hp']}, –ó–µ–ª–∏–π –æ—Å—Ç–∞–ª–æ—Å—å: {player['potions']}")
    print(f"–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å: {', '.join(player['inventory']) if player['inventory'] else '–ø—É—Å—Ç–æ'}")

    if player['has_relic']:
        print("–†–µ–ª–∏–∫–≤–∏—è –°–≤–µ—Ç–∞: —Å –≤–∞–º–∏")
    else:
        print("–†–µ–ª–∏–∫–≤–∏—è –°–≤–µ—Ç–∞: –Ω–µ –æ–±—Ä–µ—Ç–µ–Ω–∞")

    print_slow("\n–°–ø–∞—Å–∏–±–æ –∑–∞ –∏–≥—Ä—É! –í–∞—à–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–∏–ª–æ—Å—å, –Ω–æ –ª–µ–≥–µ–Ω–¥—ã –æ –Ω—ë–º –±—É–¥—É—Ç –∂–∏—Ç—å –≤–µ—á–Ω–æ...")


if __name__ == "__main__":
    main()
